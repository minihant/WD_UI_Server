<!DOCTYPE html>
<html>

<head>
    <title>UTC command Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="./lib/material.orange-indigo.min.css">
    <link rel="stylesheet" href="./lib/icon.css">
    <script defer src="./lib/material.min.js"></script>
    <script src="./lib/jquery.min.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="./lib/styles.css">
</head>

<body>
    <header>UTC Command
    <a id="demo-menu-lower-right" href="/"
                class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">home</i>
        </a>
    </header>
    <nav>
        <a>
            <textarea type="text" placeholder="status" id="ID_Prnstatus" rows="1" cols="40" class="statusmessage" readonly></textarea>
        </a>    
    </nav>
    <div class="mybox-4">
        <li>
            <h4>Standard Mode</h4>
        </li>
        <h6>Display Setting</h6>
        <li>
            <a>
                <form id="reset"> <input type="submit" value="Reset Display" class="btn"> </form>
            </a>
        </li>
        <li>
            <a>
                <form id="clr_end_line"> <input type="submit" value="Clear to End/Line" id="bt_clear" class="btn"> </form>
            </a>
        </li>
        <li>
            <a>
                <form id="clr_end_display"><button type="submit" class="btn">Clear to End/Display</button></form>
            </a>
        </li>
        <li>
            <a>
                <form id="home_clr_display"><button type="submit" class="btn">Home /Clear Display</button></form>
            </a>
        </li>
        <li>
            <a>
                <form id="st_overwrite"><button type="submit" class="btn">Overwrite Mode</button></form>
            </a>
        </li>
        <li>
            <a>
                <form id="st_Vscroll"><button type="submit" class="btn">Vertical Scroll</button></form>
            </a>
        </li>
        <li>
            <a>
                <form id="brightness">
                    <select name="type_id" id="britnesss_val">
                        <option value="0" selected>0%</option>
                        <option value="20">20%</option>
                        <option value="40">40%</option>
                        <option value="60">60%</option>
                    </select>
                    <button type="submit" class="btn">Dimming Adj</button>
                </form>
            </a>
        </li>
    </div>
    <div class="mybox-4">
        <li>
            <h4>Standard Mode</h4>
        </li>
        <h6>Cursor Move</h6>
        <li>
            <a>
                <form id="cs_onoff"><input type="submit" value="Cursor ON" id="btcs_on" class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                X:<input type="range" name="message" value=0 min=0 max=39 id="pos_x" oninput="pos_out.value = pos_x.value"> 
                <output id="pos_out">0</output><br>
                <form id="cs_mvXY"> <button type="submit" class="btn">Display at :</button></form>
            </a>
        </li>
        
        <div class="mbtn-group " style="width:100% ">
            <form id="cs_mvL"><button style="width:50%">Back Space</button></form>
            <form id="cs_mvR"><button style="width:50%">Horizontal Tab</button> </form>
        </div>
        <div class="mbtn-group " style="width:100% ">
            <form id="linefeed"><button style="width:50%">Line Feed</button></form>
            <form id="creturn"><button style="width:50%">Carriage Return</button></form>
        </div>
        <li>
            <a>
                <form id="f_text_start"><input type="submit" value="Flashing text Start"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="f_text_end"><input type="submit" value="Flashing text End"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="st_enhanced"><button type="submit" class="btn">Enhanced Mode</button></form>
            </a>
        </li>
    </div>
    <div class="mybox-4">
        <li>
            <h4>Enhanced Mode</h4>
        </li>
        <li>
            <a>
                <form id="st_standard"><button type="submit" class="btn">Standard Mode</button></form>
            </a>
        </li>
        
        <li>
            <a>
                <form id="ef_text_start"><input type="submit" value="*Flashing text Start"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="ef_text_end"><input type="submit" value="*Flashing text End"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="displaytime"><input type="submit" value="Display Time"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <textarea  id="atc_n" rows="1" cols="3" maxlength="255">32</textarea> :  
                <textarea  id="atc_m" rows="1" cols="3" maxlength="255">32</textarea>       
                <form id="attentioncode"><input type="submit" value="Attenetion Code"  class="btn"></form>
            </a>
        </li>
    </div>
    <div class="mybox-4">
        <li>
            <h4>Enhanced Mode</h4>
        </li>
        <h6>String function</h6>
        <li>
            <a>
                <form id="upperline">
                    <textarea name="message" id="txt_line1" rows="1" cols="19" maxlength="20">Line1</textarea>   
                    <button type="submit" class="btn">Upper Line</button>
                </form>
            </a>
        </li>
        <li>
            <a>
                <form id="bottomline">
                    <textarea name="message" id="txt_line2" rows="1" cols="19" maxlength="20">Line2</textarea>
                    <button type="submit" class="btn">Bottom Line</button>
                </form>
            </a>
        </li>
        <li>
            <a>
                <form id="twoline">
                    <textarea name="message" id="two_line" rows="2" cols="20" maxlength="40">Two Line Display----1234567890abcdefghih</textarea>
                     <button type="submit" class="btn">Two Line Display</button>
                </form>
            </a>
        </li>
        <h6>Scroll Function</h6>
        <li>
            <a>
                <form id="upscrollcnt">
                    <textarea name="message" id="txt_cnt" rows="1" cols="19" maxlength="40">Line scroll Continue</textarea>
                    <button type="submit" class="btn">Scroll Line Continue</button>
                </form>
                <form id="scrolloncepass">
                    <textarea name="message" id="txt_once" rows="2" cols="19" maxlength="40">Line Scroll once pass</textarea>
                    <button type="submit" class="btn">Scroll Line OncePass</button>
                </form>
            </a>
        </li>  
    </div>
    <footer>Copyright &copy; http://www.winpos.com.tw</footer>

<script>
    var reader;
    var output = "";

    $(function() {
        var rcvToken;
        var uuid;
        var cs_status = 0;
        var reverse_status = '0';
        var socket = io.connect();
        socket.emit('NewClient');
        //-------------------------------------
        $('#reset').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'RESET',
            });
        });
        $('#clr_end_line').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'CLR_END_LINE',
            });
        });
        $('#clr_end_display').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'CLR_END_DISPLAY',
            });
        });
        $('#home_clr_display').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'HOME_CLR_DISPLAY',
            });
        });
        $('#st_overwrite').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'OVERWRITE'
            });
        });
        $('#st_Vscroll').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'VSCROLL'
            });
        });
        $('#st_standard').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'STANDARD'
            });
        });
        $('#st_enhanced').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'ENHANCE'
            });
        });
        $('#cs_onoff').submit(function(e) {
            e.preventDefault();
            if (cs_status == 0) {
                cs_status = 1;
                document.getElementById("btcs_on").value = "Cursor OFF";
                document.getElementById("btcs_on").style.background = '#700000';
            } else {
                cs_status = 0;
                document.getElementById("btcs_on").value = "Cursor ON";
                document.getElementById("btcs_on").style.background = '#308000';
            }
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'CS_ONOFF',
                parm: cs_status
            });
        });
        $('#cs_mvXY').submit(function(e) {
            e.preventDefault();
            var x_val = document.getElementById("pos_x").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'MOVE_X',
                parm: x_val
            });
        });
        $('#brightness').submit(function(e) {
            e.preventDefault();
            var el = document.getElementById("britnesss_val");
            var cs = el.options[el.selectedIndex].value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'DIMMING',
                parm: cs
            });
        });
        $('#cs_mvL').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'BACKSPACE',
            });
        });
        $('#cs_mvR').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'HORI_TAB',
            });
        });
        $('#linefeed').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'LINE_FEED',
            });
        });
        $('#creturn').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'RETURN',
            });
        });
        $('#f_text_start').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'FLASHING_TEXT_START',
            });
        });
        $('#f_text_end').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'FLASHING_TEXT_END',
            });
        });
        $('#upperline').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("txt_line1").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'LINE1',
                parm: val
            });
        });
        $('#bottomline').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("txt_line2").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'LINE2',
                parm: val
            });
        });
        $('#upscrollcnt').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("txt_cnt").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'SCROLL_CONTINUE',
                parm: val
            });
        });
        $('#scrolloncepass').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("txt_once").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'SCROLL_ONCEPASS',
                parm: val
            });
        });
        $('#ef_text_start').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'E_FLASH_TEXT_START',
            });
        });
        $('#ef_text_end').submit(function(e) {
            e.preventDefault();
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'E_FLASH_TEXT_END',
            });
        });
        $('#twoline').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("two_line").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'TWO_LINE',
                parm: val
            });
        });
        $('#displaytime').submit(function(e) {
            e.preventDefault();
            var currentdate = new Date();
            var hr = currentdate.getHours().toString();
            var minute = currentdate.getMinutes().toString();
            var nowtime = hr + ":" + minute;
            socket.emit('UTC_', {
                id: socket.id,
                cmd:'DISPLAY_TIME',
                parm: nowtime,
            });
        });
        $('#attentioncode').submit(function(e) {
            e.preventDefault();
            var n = document.getElementById("atc_n").value;
            var m = document.getElementById("atc_m").value;
            socket.emit('UTC_', {
                id: uuid,
                cmd: 'ATTENTION_CODE',
                p1: n,
                p2: m,
            });
        });
        
        
        //--------------------------------------- 
        socket.on('done', function(data) {
            $('#ID_Prnstatus').val(data);
        });
        socket.on('LoginSuccess', function(data) {
            rcvToken = data.token;
            $('#ID_Prnstatus').val('Login : ' + data.id);
        });
        socket.on('regist_client', function(data) {
            uuid = data;
        });
        socket.on('haveToken', function(data) {
            rcvToken = data;
        });
    });

</script>
</body>
</html>