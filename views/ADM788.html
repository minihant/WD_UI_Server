<!DOCTYPE html>
<html>

<head>
    <title>ADM788 command Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="./lib/material.orange-indigo.min.css">
    <link rel="stylesheet" href="./lib/icon.css">
    <script defer src="./lib/material.min.js"></script>
    <script src="./lib/jquery.min.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="./lib/styles.css">
</head>

<body>
    <header>ADM788 Command 
        <a id="demo-menu-lower-right" href="/"
                class="mdl-button mdl-js-button mdl-button--icon">
            <i class="material-icons">home</i>
        </a>
    </header>
    <nav>
        <a>
            <textarea type="text" placeholder="status" id="ID_Prnstatus" rows="1" cols="40" class="statusmessage" readonly></textarea>
        </a>
    </nav>

    <div class="mybox-4">
        <li>
            <h6>Display Setting</h6>
        </li>
        <li>
            <a>
                <form id="clr"><input type="submit" value="Clear Display"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="cr"><input type="submit" value="Carriage Retuen"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="sle1"><input type="submit" value="Clear L1 & CS to LM"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="sle2"><input type="submit" value="Clear L2 & CS to LM"  class="btn"></form>
            </a>
        </li>
        
       
        <li>
            <a>
                <form id="sf1"><input type="submit" value="Clear F1 & CS to ?"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <form id="sf2"><input type="submit" value="Clear F2 & CS to ?"  class="btn"></form>
            </a>
        </li>
    </div>
    <div class="mybox-4">
        <li>
            <h6>Blinking Setting</h6>
        </li>
        <li>
            <a>
                <textarea  id="dc0_n" rows="1" cols="2" maxlength="1">1</textarea>   
                <form id="_dc0"><input type="submit" value="Set period to Line1 X:"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <textarea  id="dc1_n" rows="1" cols="2" maxlength="1">1</textarea>   
                <form id="_dc1"><input type="submit" value="Set Line Blinking"  class="btn"></form>
            </a>
        </li>
        <li>
            <a>
                <textarea  id="dc2_n" rows="1" cols="2" maxlength="1">1</textarea>   
                <form id="_dc2"><input type="submit" value="Clear Line Blinking"  class="btn"></form>
            </a>
        </li>
    </div>

    <footer>Copyright &copy; http://www.winpos.com.tw</footer>

<script>
    var reader;
    var output = "";

    $(function() {
        var rcvToken;
        var uuid;
        var cs_status = 0;
        var reverse_status = '0';
        var socket = io.connect();
        socket.emit('NewClient');
        //-------------------------------------
        $('#clr').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'CLR',
            });
        });
        $('#cr').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'CR',
            });
        });
        $('#sle1').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'SLE1',
            });
        });
        $('#sle2').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'SLE2',
            });
        });
        $('#_dc0').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("dc0_n").value;
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'DC0',
                parm: val,
            });
        });
        $('#_dc1').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("dc1_n").value;
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'DC1',
                parm: val,
            });
        });
        $('#_dc2').submit(function(e) {
            e.preventDefault();
            var val = document.getElementById("dc2_n").value;
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'DC2',
                parm: val,
            });
        });
        $('#sf1').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'SF1',
            });
        });
        $('#sf2').submit(function(e) {
            e.preventDefault();
            socket.emit('ADM788_', {
                id: uuid,
                cmd: 'SF2',
            });
        });

        //--------------------------------------- 
        socket.on('done', function(data) {
            $('#ID_Prnstatus').val(data);
        });
        socket.on('LoginSuccess', function(data) {
            rcvToken = data.token;
            $('#ID_Prnstatus').val('Login : ' + data.id);
        });
        socket.on('regist_client', function(data) {
            uuid = data;
        });
        socket.on('haveToken', function(data) {
            rcvToken = data;
        });
    });
 
</script>
</body>
</html>